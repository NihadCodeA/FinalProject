 @model OrderViewModel
 @{
    double total = 0;
    double savings = 0;
    double finalPrice = 0;
    foreach (var item in Model.ChechoutItems)
    {
        if (item.Count > 0)
        {
            total += item.Product.SalePrice * item.Count;
            savings += item.Product.SalePrice * item.Count - item.Product.SalePrice * item.Count * (1 - item.Product.DiscountPercentage / 100);
        }
    }
    finalPrice += total - savings;
 }
 <main>
  <!-- section -->
  <section class="mb-lg-14 mb-8 mt-8">
    <div class="container">
      <!-- row -->
      <div class="row">
        <!-- col -->
        <div class="col-12">
          <div>
            <div class="mb-5">
              <!-- text -->
              <h1 class="fw-bold mb-0">Checkout</h1>
            </div>
          </div>
        </div>
      </div>
      <div>
        <!-- row -->
        <div class="row">
          <div class="col-lg-7 col-md-12">
             <form id="formOrder" method="post" asp-action="order" asp-controller="product" class="row">
                  <div class="col-12 col-lg-6 mt-2">
                    <label asp-for="FullName" class="form-label sr-only">Full name</label>
                    <input asp-for="FullName" class="form-control" placeholder="Full name">
                   <span class="text-danger" asp-validation-for="FullName"></span>
              </div>
               <div class="col-12 col-lg-6 mt-2">
                  <label asp-for="PhoneNumber" class="form-label sr-only">PhoneNumber</label>
                  <input asp-for="PhoneNumber" class="form-control" placeholder="PhoneNumber">
                  <span class="text-danger" asp-validation-for="PhoneNumber"></span>
              </div>
              <div class="col-12 mt-2">
                    <label asp-for="Email" class="form-label sr-only">Email</label>
                    <input asp-for="Email" class="form-control" placeholder="Email">
                    <span class="text-danger" asp-validation-for="Email"></span>
              </div>
                            <div class="col-12 col-lg-6 mt-2">
                    <label asp-for="Country" class="form-label sr-only">Country</label>
                    <input asp-for="Country" class="form-control" placeholder="Country">
                    <span class="text-danger" asp-validation-for="Country"></span>
              </div>
                            <div class="col-12 col-lg-6 mt-2">
                    <label asp-for="City" class="form-label sr-only">City</label>
                    <input asp-for="City" class="form-control" placeholder="City">
                    <span class="text-danger" asp-validation-for="City"></span>
              </div>
                            <div class="col-12 mt-2">
                    <label asp-for="Address1" class="form-label sr-only">Address1</label>
                    <input asp-for="Address1" class="form-control" placeholder="Address1">
                    <span class="text-danger" asp-validation-for="Address1"></span>
              </div>
                            <div class="col-12 mt-2">
                    <label asp-for="Address2" class="form-label sr-only">Address2</label>
                    <input asp-for="Address2" class="form-control" placeholder="Address2">
                    <span class="text-danger" asp-validation-for="Address2"></span>
              </div>
                            <div class="col-12 mt-2">
                    <label asp-for="OtherNotes" class="form-label sr-only">Other notes</label>
                    <textarea asp-for="OtherNotes" class="form-control" rows="3" placeholder="Write delivery instructions "></textarea>
                    <span class="text-danger" asp-validation-for="OtherNotes"></span>
              </div>
              </form>
              
          </div>
          <div class="col-12 col-md-12 offset-lg-1 col-lg-4">
            <div class="mt-4 mt-lg-0">
              <div class="card shadow-sm">
                <h5 class="px-6 py-4 bg-transparent mb-0">Order Details</h5>
                <ul class="list-group list-group-flush">
                  <!-- list group item -->
                                    @foreach (var productVM in Model.ChechoutItems)
                                    {
                                        if (productVM.Count > 0)
                                        {
                                            <li class="list-group-item px-4 py-3">
                                                <div class="row align-items-center">
                                                    <div class="col-2 col-md-2">
                                                        <img src="~/uploads/products/@productVM.Product.ProductImages.FirstOrDefault(pi=>pi.IsPoster==true).Image" alt="" class="img-fluid">
                                                    </div>
                                                    <div class="col-5 col-md-5">
                                                        <h6 class="mb-0">@productVM.Product.Name</h6>
                                                        <span><small class="text-muted">@productVM.Product.Weight g</small></span>

                                                    </div>
                                                    <div class="col-2 col-md-2 text-center text-muted">
                                                        <span>@productVM.Count</span>

                                                    </div>
                                                    <div class="col-3 text-lg-end text-start text-md-end col-md-3">
                                                        @if (productVM.Product.DiscountPercentage > 0)
                                                        {
                                                            <span class="text-dark">@((productVM.Product.SalePrice * (1 - productVM.Product.DiscountPercentage / 100)).ToString("0.00"))</span>
                                                        }
                                                        <span class="@(productVM.Product.DiscountPercentage>0 ? "text-decoration-line-through text-muted small" : "text-dark small")">$@(productVM.Product.SalePrice)</span>

                                                    </div>
                                                </div>

                                            </li>
                                        }
                                    }

                  <!-- list group item -->
                  <li class="list-group-item px-4 py-3">
                    <div class="d-flex align-items-center justify-content-between   mb-2">
                      <div>
                               <div>Total</div>

                      </div>
                      <div class="fw-bold">
                                <span>$@(total)</span>

                      </div>

                    </div>
                    <div class="d-flex align-items-center justify-content-between  ">
                      <div>
                             savings

                      </div>
                      <div class="fw-bold">
                               <span>$@(savings.ToString("0.00"))</span>
                      </div>

                    </div>

                  </li>
                  <!-- list group item -->
                  <li class="list-group-item px-4 py-3">
                    <div class="d-flex align-items-center justify-content-between fw-bold">
                      <div>
                                 Final price
                      </div>
                      <div>
                            <span class="fw-bold">$@(finalPrice.ToString("0.00"))</span>
                      </div>

                    </div>


                  </li>

                </ul>
              </div>
                 <button form="formOrder" type="submit" class="btn btn-primary mt-5 w-100">Submit</button>


            </div>
          </div>


        </div>
      </div>


    </div>


  </section>
</main>